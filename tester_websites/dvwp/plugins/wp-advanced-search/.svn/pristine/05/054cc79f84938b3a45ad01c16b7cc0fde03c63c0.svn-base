(function(e){e.fn.ajaxTrigger=function(t,n){t=e.extend({target:"resultatsAjax.php",limit:0,nbResult:"",duration:300,classLast:".results",loadImg:"loadingBlue.gif",idImg:"imgLoading",attrID:"id",evt:"click"},t);loader=this;if(parseInt(e(t.classLast+":last").attr(t.attrID))<parseInt(t.nbResult)){loader.show()}if(t.nbResult==""||t.nbResult==0){loader.remove()}loader.on(t.evt,function(){var r=parseInt(e(t.classLast+":last").attr(t.attrID));var i=Math.ceil((r+1)/parseInt(t.limit));if(r<=parseInt(t.limit)){var s=parseInt(r);var i=i+1}else{var s=parseInt(t.limit)}params={page:i,nb:r,limit:s};n=e.extend(n,params);e.ajax({url:t.target+"?"+n.queryNameAS,data:n,success:function(n){if(t.loadImg!=""){loader.before('<div id="'+t.idImg+'"><img src="'+t.loadImg+'" alt="loading..." /></div>');e("#"+t.idImg).show()}loader.hide();setTimeout(function(){e(t.classLast+":last").after(n);if(t.loadImg!=""){e("#"+t.idImg).remove()}},t.duration);loader.show();if(params.nb+params.limit>=t.nbResult){loader.remove()}},error:function(e,t){console.log("Error: "+t)}})});return this}})(jQuery)