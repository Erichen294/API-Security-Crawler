!function(a){a.fn.ajaxInfiniteScroll=function(t,e){t=a.extend({target:"resultatsAjax.php",limit:10,nbResult:"",duration:500,classLast:".results",loadMore:"#loadMore",attrID:"id",evt:"scroll"},t),loader=this;var r=!1;return loader.bind(t.evt,function(){var s=parseInt(a(t.classLast+":last").attr(t.attrID)),n=Math.ceil((s+1)/parseInt(t.limit));if(s<=parseInt(t.limit))var o=parseInt(s),n=n+1;else var o=parseInt(t.limit);if(params={page:n,nb:s,limit:o},e=a.extend(e,params),params.nb>=params.limit&&a(t.loadMore).show(),a(t.loadMore).show(),""==parseInt(t.nbResult)||0==parseInt(t.nbResult)){var l=params.limit*params.page;parseInt(a(t.classLast+":last").attr(t.attrID))>=parseInt(t.nbResult)&&(a(t.loadMore).remove(),loader.unbind(t.evt),r=!0)}else{var l=parseInt(t.nbResult);parseInt(a(t.classLast+":last").attr(t.attrID))>=parseInt(t.nbResult)&&(a(t.loadMore).remove(),loader.unbind(t.evt),r=!0)}var i=parseInt(a("#loadMoreIS").offset().top);i-a(window).height()<=a(window).scrollTop()&&r===!1&&params.nb>=params.limit&&params.nb<=l&&(r=!0,a.ajax({url:t.target+"?"+e.queryNameAS,data:e,success:function(e){a(t.loadMore).fadeOut(t.duration),setTimeout(function(){a(t.classLast+":last").after(e)},t.duration)},complete:function(a,e){setTimeout(function(){"success"==e&&(r=!1)},t.duration)},error:function(a,t){console.log("Error: "+t)}}))}),this}}(jQuery);